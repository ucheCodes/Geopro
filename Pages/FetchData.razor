@page "/test"

@using OxyPlot
@using OxyPlot.Axes
@using OxyPlot.Annotations
@using OxyPlot.Blazor

<BlazorPlotView Model="@plotModel"/>

@code {
    private PlotModel plotModel = new();

    protected override void OnInitialized()
    {
        plotModel = new PlotModel { Title = "Rectangle with Text" };

        CreateRectangleWithText();
    }

    private void CreateRectangleWithText()
    {
        // Define axes
        plotModel.Axes.Add(new LinearAxis { Position = AxisPosition.Bottom, Minimum = 0, Maximum = 10 });
        plotModel.Axes.Add(new LinearAxis { Position = AxisPosition.Left, Minimum = 0, Maximum = 10 });

        // Add a rectangle annotation
        var rectangleAnnotation = new RectangleAnnotation
        {
            MinimumX = 2,
            MaximumX = 8,
            MinimumY = 3,
            MaximumY = 7,
            Fill = OxyColors.LightGray,
            Stroke = OxyColors.Black,
            StrokeThickness = 1
        };
        plotModel.Annotations.Add(rectangleAnnotation);

        // Add a text annotation
        var textAnnotation = new TextAnnotation
        {
            Text = "This is a text inside the rectangle",
            TextPosition = new DataPoint((rectangleAnnotation.MinimumX + rectangleAnnotation.MaximumX) / 2, 
                                         (rectangleAnnotation.MinimumY + rectangleAnnotation.MaximumY) / 2),
            FontSize = 16,
            TextHorizontalAlignment = HorizontalAlignment.Center,
            TextVerticalAlignment = VerticalAlignment.Middle,
            Stroke = OxyColors.Transparent
        };
        plotModel.Annotations.Add(textAnnotation);
    }
}